(
    function ($) {
  "use strict";

  var gateway = 'other';
  $('body').on('change', 'input[name="gateway"]', function (e) {

    $("#cardarea").show();
    e.preventDefault();
    $('button#paymentSubmit').removeAttr('disabled');
    gateway = $(this).attr('data-class');
  });
  $('#paymentSubmit').on('click', function (e) {
    e.preventDefault();

var stripekey = $('#key').val();
        var $form = $("#require-validation");



            var $form  = $("#require-validation");




            if (!$form.data('cc-on-file')) {
              e.preventDefault();
              Stripe.setPublishableKey(stripekey);
              Stripe.createToken({
                number: $('.card-number').val(),
                cvc: $('.card-cvc').val(),
                exp_month: $('.card-expiry-month').val(),
                exp_year: $('.card-expiry-year').val()
              }, stripeResponseHandler);
            }



      function stripeResponseHandler(status, response) {
            if (response.error) {
                $('.error')
                    .removeClass('hide')
                    .find('.alert')
                    .text(response.error.message);
            } else {
                /* token contains id, last4, and card type */
                var token = response['id'];
                $form.find('input[type=text]').empty();
                $form.append("<input type='hidden' name='stripeToken' value='" + token + "'/>");

                $form.get(0).submit();
            }
        }


  });
})(jQuery);


